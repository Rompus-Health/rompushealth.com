---
// Formbricks Script Component
// Put this in: src/components/scripts/FormbricksScript.astro
---

<!-- Formbricks Integration Script -->
<script type="text/javascript">
  !function(){
    var t=document.createElement("script");
    t.type="text/javascript",
    t.async=!0,
    t.src="https://unpkg.com/@formbricks/js@^1.6.5/dist/index.umd.js";
    var e=document.getElementsByTagName("script")[0];
    e.parentNode.insertBefore(t,e),
    setTimeout(function(){
      if (window.formbricks) {
        window.formbricks.init({
          environmentId: "cmfk9bhq23zgmz201gcady8lr",
          apiHost: "https://app.formbricks.com",
          debug: true
        });
        console.log("âœ… Formbricks initialized successfully");
        
        // Track page view to help with survey targeting
        window.formbricks.track("pageview", {
          url: window.location.href,
          path: window.location.pathname
        });
      }
    }, 500)
  }();
</script>


<!-- Formbricks Custom Styles -->
<style is:global>
  /* Custom styling for Formbricks surveys */
  .formbricks-survey {
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    font-family: 'Inter Variable', system-ui, sans-serif;
  }
  
  /* Ensure surveys are visible and properly positioned */
  .formbricks-survey-container {
    z-index: 1000;
  }

  /* Style the modal overlay if using modal surveys */
  .formbricks-modal-overlay {
    backdrop-filter: blur(4px);
    background-color: rgba(0, 0, 0, 0.5);
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .formbricks-survey {
      margin: 1rem;
      max-width: calc(100vw - 2rem);
    }
  }
</style>